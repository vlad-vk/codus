^015
~175 Описание работы регулятора: ~004ПОДКАЧКА ПАСТЫ ~175[10]
~005 ================================================
    
    
~047 НАЧАЛО:
    
~003 -------------------------------------------------------------------------------

~047 ШАГ 00:
~001         // ПРОВЕРКА начального СОСТОЯНИЯ РЕГУЛЯТОРА

~000         ~000Если это первый цикл на этом шаге- обнулить все таймеры регулятора
~007         ~007Clear_TO(191); Clear_TO(192); Clear_TO(193); Clear_TO(194);
~007         ~007Clear_TO(195); Clear_TO(196); Clear_TO(197); Clear_TO(198);
~007         ~007Clear_TO(199);
~000         ~000Закрыть все исполнители регулятора
~007         ~007Regul_10off();

~006         1. ~000если нет сигнала нижнего уровня в емкости вода-ПАВ
~000            ~000и включен контроль уровня - выйти
~007            ~007if(DIL270___V==OFF and CTRL_LLVPV==ON){ return;  }
~006         2. ~000если нет сигнала нижнего уровня в нижн.мешалке ал.пасты
~000            ~000и включен контроль уровня - выйти
~007            ~007if(DIL300___V==OFF and CTRL_LLM1V==ON){ return;  }
~006         3. ~000если емкость вода-ПАВ переведена на ручное управление- выйти
~007            ~007if(DIR270___V==MANUAL){ return;  }
~006         4. ~000если нижн. мешалка ал.пасты переведена на ручное управление- выйти
~007            ~007if(DIR300___V==MANUAL){ return;  }

~001            проверка состояния исполнителей регулятора:
~006         5. ~000исполнители емкости вода-ПАВ
~007            ~007if(DIS272___V==ON or DIS274___V==ON)
~007            ~007** case BAD: { Message(269); Bell(1); Clear_TO(191); return;
~006         6. ~000исполнители нижн мешалки ал.пасты
~007            ~007if(DIS301___V==ON){ 
~007            ~007** case BAD: { Message(269); Bell(1); Clear_TO(192); return;; }

~000            обнулить счетчики времени набора в емкость вода-ПАВ и кол-во дозировок
~007            TIME_PHLVCMin=0; TIME_PHLVC=0;
~007            TIME_PLLVCMin=0; TIME_PLLVC=0; COUN_PADZC=0;
~000            перейти на следующий шаг
~007            ~001ШАГ~007=~004 01;


~003 -------------------------------------------------------------------------------

~047 ШАГ 01:
~001         // НАБОР ВОДЫ В ЕМКОСТЬ ВОДА-ПАВ

~000         открыть клапан набора воды
~007         вода            ПАВ паста        насос            пар
~007         DON272___V=ON;; DON274___V=OFF;  DON301___V=OFF;  DIS275___S=OFF;
~000         счетчик ожидания выключения сигнала нижнего уровня емкости вода-ПАВ:
~007         switch ( Check_TO(199, TIME_PLLVW*MIN, DIL270___V,'=',OFF, TIME_LSTBV )){
~007             case RUN:{ TIME_PLLVCMin++; TIME_PLLVC=TIME_PLLVCMin/MIN; break;; }
~007             case BAD:{ Bell(1); Message (234); Clear_TO(199); break;; } 
~000         счетчик ожидания включения сигнала верх уровня емкости вода-ПАВ:
~007         switch ( Check_TO(198, TIME_PHLVW*MIN, DIH270___V,'=',ON, TIME_LSTBV )){
~007             case RUN:{ TIME_PHLVCMin++; TIME_PHLVC=TIME_PHLVCMin/MIN; break;; }
~008             если за заданное время уровня нет- звонок, сообщение, выкл регулятор
~007             case BAD:{ Bell(1); Message(235); Message(680); Clear_TO(198); 
~007                        REG10R___M=OFF; return; }
~000         ожидать появления сигнала верхнего уровня емкости вода-ПАВ (проверка)
~007         switch ( Check_TO(191, TIME_PHLVW*MIN, DIH270___V,'=',ON, TIME_LSTBV )){
~000         закрыть клапан набора воды в емк вода-ПАВ
~007         вода            ПАВ паста        насос            пар
~007         DON272___V=OFF; DON274___V=OFF;  DON301___V=OFF;  DIS275___S=OFF;
~000         перейти на следующий шаг
~007         ~001ШАГ~007=~004 02;

~003 -------------------------------------------------------------------------------
