
 Описание работы регулятора:  ДОЗИРОВКА МОКРОГО [7]
 ==================================================


НАЧАЛО:

         Установки для работы регулятора, определяемые оператором.
         Если регулятор выключен (REG07R___V==OFF) - выйти.
         Если ключи режима переключены в режим РУЧНОЕ 
         (DIR210___V==OFF или DIR220___V==OFF или DIR200___V==OFF) - выйти.


ШАГ 00:
         Если дозатор сухого не набран(DON801___V==OFF) или пудра (паста)
         не набрана (DON803___V==OFF)- выйти.
         Если нет нижнего уровня в мешалке отходов (DIL210___V==OFF)- выйти,
         при повторе выводить сообщение.
         Если нет нижнего уровня в мешалке шлама (DIL220___V==OFF)- выйти,
         при повторе выводить сообщение.
         Если нет нижнего уровня в сборнике воды (DIL200___V==OFF)- выйти,
         при повторе выводить сообщение.
         Перейти на ШАГ 01.


ШАГ 01:
         Если ВГБМ нет на месте (DIS315___V==OFF)- выйти с сообщением.
         Если ВГБМ не включена (DIS310___V==OFF)- выйти с сообщением.
         Если герметизатор не опущен (DIS31A___V==OFF)- выйти с сообщением.
         Ожидание сигнала от оператора для загрузки-выгрузки мокрого
         (DIS701___V==ON).
         Если определенное время(2мин) нет сигнала- напоминание оператору.
         Перейти на ШАГ 02.



Дозировка отходов
ШАГ 02:
         Открыть клапан ГРУБО дозировки отходов (DON211___V=ON).
         Открыть клапан ТОЧНО дозировки отходов (DON212___V=ON).
         Запомнить начальный вес дозатора мокрого
         AIW230___O = AIW230___V;
         LOAD_MKBVV = AIW230___V;
         Перейти на ШАГ 03.


ШАГ 03:
         Если вес сдозированных отходов (AIW230___V) больше или равен 
         заданному (TROTH__VIB) минус вес отсечки отходов ГРУБО
         (LOAD_OTGRV)- закрыть клапан ГРУБО (DON211___V=OFF) и 
         перейти на ШАГ 04.
         Иначе ожидать набора заданного веса.


ШАГ 04:
         Если вес сдозированных отходов (AIW230___V) больше или равен 
         заданному (TROTH__VIB) минус вес отсечки отходов ТОЧНО
         (LOAD_OTTCV)- закрыть клапан ТОЧНО (DON212___V=OFF) и
         перейти на ШАГ 05
         Иначе ожидать набора заданного веса.


ШАГ 05:
         Контрольная комманда закрытия клапанов дозировки отходов
         (DON211___V=OFF, DON212___V=OFF).
         Перейти на ШАГ 06.


ШАГ 06:
        (Данный шаг выполняется раз в секунду).
         Если после времени (TIME_MKSTV) текущий вес (AIW230___V) больше,
         чем  запомненный вес (AIW230___O) плюс заданный вес стабилизации
         (LOAD_MKSTV)- вес не стабилизировался (сообщение).Выход.

         Если выбрана дозировка покомпонентно перейти на ШАГ 32(выгрузка)
         с последующим возвратом на ШАГ 12(загрузка шлама).
         Иначе переход сразу на ШАГ12.



Дозировка шлама
ШАГ 12:
         Открыть клапан ГРУБО дозировки шлама (DON221___V=ON).
         Открыть клапан ТОЧНО дозировки шлама (DON222___V=ON).
         Запомнить начальный вес дозатора мокрого
         AIW230___O = AIW230___V;
         LOAD_MKBVV = AIW230___V;
         Перейти на ШАГ 13.


ШАГ 13:
         Если вес сдозированного шлама (AIW230___V) больше или равен 
         заданному (TRSLM__VIB) минус вес отсечки ГРУБО (LOAD_SLGRV)- 
         закрыть клапан ГРУБО (DON221___V=OFF) и перейти на ШАГ 14.
         Если веса нет- выйти.


ШАГ 14:
         Если вес сдозированного шлама (AIW230___V) больше или равен
         заданному (TRSLM__VIB) минус вес отсечки ТОЧНО (LOAD_SLTCV)- 
         закрыть клапан ТОЧНО (DON222___V=OFF) и перейти на ШАГ 15.
         Если веса нет- выйти.


ШАГ 15:
         Контрольная комманда закрытия клапанов дозировки шлама
         (DON221___V=OFF, DON222___V=OFF).
         Перейти на ШАГ 16.


ШАГ 16:
        (Данный шаг выполняется раз в секунду).
         Если после времени (TIME_MKSTV) текущий вес (AIW230___V) больше,
         чем  запомненный вес (AIW230___O) плюс заданный вес стабилизации
         (LOAD_MKSTV)- вес не стабилизировался (сообщение).Выход.

         Если выбрана дозировка покомпонентно перейти на ШАГ 32(выгрузка)
         с последующим возвратом на ШАГ 22(загрузка воды).
         Иначе переход сразу на ШАГ22.



Дозировка воды
ШАГ 22:
         Открыть клапан промывки (DON232___V=ON).
         Запомнить начальный вес дозатора мокрого
         LOAD_MKBVV=AIW230___V.
         Переход на ШАГ 23.


ШАГ 23:
         Ждать определенное время набора промывочной воды (TIME_MKPVV*SEC).
         Закрыть клапан промывочной воды (DON232___V=OFF).
         Запомнить вес дозатора мокрого (AIW230___O=AIW230___V).
         Переход на ШАГ 24.


ШАГ 24:
         Открыть клапан набора воды из сборника воды (DON202___V=ON).
         Переход на ШАГ 25.


ШАГ 25:
        (Данный шаг выполняется раз в секунду).
         Если текущий вес дозатора мокрого (AIW230___V) больше или равен
         заданному весу набора воды (TRVOD__VIB) минус вес отсечки набора
         воды (LOAD_VODOV)- закрыть клапан подачи воды (DON202___V=OFF) и
         перейти на ШАГ 26.
         Если веса нет- выйти.


ШАГ 26:
        (Данный шаг выполняется раз в секунду).
         Если после времени (TIME_MKSTV) текущий вес (AIW230___V) больше,
         чем  запомненный вес (AIW230___O) плюс заданный вес стабилизации
         (LOAD_MKSTV)- вес не стабилизировался (сообщение).Выход.

         Если выбрана дозировка покомпонентно перейти на ШАГ 32(выгрузка)
         с последующим возвратом на ШАГ 0(начало ожидания загрузки мокрого).



Выгрузка из дозатора мокрого в ВГБМ
ШАГ 32:
         Контрольная комманда на закрытие всех исполнителей набора
         DON211___V=OFF; DON212___V=OFF; 
         DON221___V=OFF; DON222___V=OFF; 
         DON202___V=OFF; DON232___V=OFF; 
         Переход на шаг 33.


ШАГ 33:
         Если ВГБМ нет на месте (DIS315___V==OFF) - выйти (сообщение).
         Если ВГБМ не включена (DIS310___V==OFF) - выйти (сообщение).
         Если герметизатор не опущен (DIS31A___V==OFF) - выйти (сообщение).
         Переход на ШАГ 34.


ШАГ 34:
         Открыть клапан выгрузки в ВГБМ (DON231___V=ON).
         Обнулить флаг выгрузки из дозатора мокрого (MK_VG_KL_OPEN=0).
         Переход на ШАГ 35.


ШАГ 35:
         Если текущий вес дозатора мокрого (AIW230___V) меньше, чем 
         запомненный (LOAD_MKBVV) плюс допустимый остаток выгрузки 
        (LOAD_MKDVV)- перейти на ШАГ 36.


ШАГ 36:
        (Данный шаг выполняется раз в секунду).
         Увеличить флаг окончания выгрузки из дозатора мокрого
        (MK_VG_KL_OPEN++).
         Если клапан выгрузки из дозатора мокрого открыт (DIS231___V==ON)
         и прошло 3 сек- закрыть клапан выгрузки из дозатора мокрого.
         Если клапан выгрузки из дозатора мокрого закрыт (DIS231___V==OFF)
         и прошло 3 сек- открыть клапан выгрузки из дозатора мокрого.
         Если прошло 12 секунд- перейти на ШАГ 37.
         Выйти.

ШАГ 37:
         Закрыть клапан выгрузки из дозатора мокрого (DON231___V=OFF).
         Вернуться на запомненный (установленный) шаг(STEP07=STEP07_BACK).
         Если это конец выгрузки дозатора мокрого (STEP07==0).
         Выключить первую сигнальную лампочку загрузок (DON801___V=0).

------------------------------------------------------------------------------
