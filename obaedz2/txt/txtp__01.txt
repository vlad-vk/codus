
ОПИСАНИЕ КОНТРОЛЛЕРА
====================

Для сбора и обработки данных используется контроллер фирмы ICP DAS ROCKY 058VH.
Контроллер представляет собой РС совместимый одноплатный компьютер
промышленного исполнения.
Процессор            :  AMD K6-2 266
Память               :  SDRAM 32Mb, FLASH IDE 16Mb, HDD 1.8Gb, FDD 3.5"
Порты                :  COM1 - обмен данными с компьютером оператора
                        COM2 - обмен данными с модулями УСО
Операционная система :  MSDOS или FreeDOS


НАЗНАЧЕНИЕ ПРОГРАММЫ КОНТРОЛЛЕРА
================================

Программа контроллера предназначена для сбора и обработки данных с модулей УСО
(Устройства Сопряжения с Объектом), и передачи этих данных на компьютер 
оператора по сети NetBIOS и через COM порт (COM1).



ПОЯСНЕНИЯ ИНТЕРФЕЙСА ПРОГРАММЫ КОНТРОЛЛЕРА
==========================================

При включении питания контроллера запускается DOS, драйвер сети NetBIOS
и программа контроллера.
Драйвер сетевой платы настроен на парамметры (IRQ=10, IOBASE=300H).
Для настройки и отладки загрузки к контроллеру можно подсоединить обычный
монитор и клавиатуру.
С программой контроллера можно так же работать через терминальную программу
с компьютера оператора.
Для этого на компьютере оператора надо зайти в каталог C:\CODUS\REM и
запустить файл term.bat.
Если программа контроллера запущена, на экране должно появиться приглашение 
ввода ">".
Если ввести комманду "h" (без кавычек) и нажать клавишу ENTER -на экран 
будет выведен список всех доступных комманд программы контроллера:

! <#> = <value> -set value #cell into array DBB[].
% <#1> <#2> <v> -set value in array DBB[] from #cell_1 to #cell_2.
? <#>           -get value #cell from array DBB[].
c <#1> <#2> ... -list defined #cells from array DBB[].
l <#1>-<#2>     -list from #cell_1 to #cell_2 array DBB[].
w               -write channel array to disk.
r               -read channel array from disk.
s               -status global variables.
v               -version info.
t1r 9600,8,0,1  -set COM1 to baud=9600,data=8,parity=None,stop=1.
t2s $00M        -send to COM2 string $00M.
t2c1            -CRC enable for all terminal operations.
p               -view previous command in command line.
u<0..9>         -users command (int uCMD[] set to 1).
q               -exit from programm.

>



ОПИСАНИЕ КОММАНД ПРОГРАММЫ КОНТРОЛЛЕРА:
=======================================

// Все данные рабочей программы контроллера записаны в одном массиве и имеют
// сквозную нумерацию 0..4000 (см.описание переменных программы контроллера).

! <номер> = <значение>
   Устанавливает ячейку с указанным номером в определенное значение

% <номер1> <номер2> <значение>
   Устанавливает ячейки в диапазоне между номером1 и номером2 в определенное
   значение.
   !!! перед установкой значений,несколько раз проверьте,что устанавливаете !!!
   !!! значения в нужных ячейках                                            !!!

? <номер>
   Вывести значение ячейки с указанным номером

c <номер1> <номер2> <номерX>
   Вывести значения ячеек с перечисленными номерами

l <номер1> <номер2>
   Вывести значения ячеек в диапазоне от номер1 до номер2, но не более 20

w  Записать данные на флеш-диск

r  Прочитать запомненные данные

s  Вывести статус глобальных переменных настроек портов

v  Вывести информацию о версии рабочей программы контроллера

t1r <скорость>;
   Установить скорость работы указанного COM порта. Номер COM порта задается
   вторым символом данной комманды: t1-COM1, t2-COM2, t3-COM3.
   Допустимые скорости: 2400,4800,9600,19200,38400,57600,115200.
   При установке скорости надо следить, чтобы скорость контроллера и модулей
   УСО, а так же контроллера и компьютера оператора, совпадали!

t2s <команда>
   Задание комманды модулям УСО. Можно задать любую комманду модулю УСО, как
   в терминальной программе. (см.руководство по модулям УСО)
   Если не приходят ответы от модулей можно попробывать изменить следующий
   параметр t2c.

t2c1
   Установка проверки контрольной суммы обмена с модулями УСО. 
   t2c -отмена проверки.

p  Вывод на экран предыдущей комманды

u<0..9>
   Выполнение функции, определенной в пользовательской программе.
   (не используется)

q  Выход из рабочей программы контроллера в операционную систему.
   Для повторного запуска программы контроллера надо набрать на клавиатуре
   run_prg.exe и нажать клавишу ENTER.

Примечания: 
   - все комманды программы контроллера должны заканчиваться
     нажатием клавиши ENTER;
   - для отмены наборанной комманды нажимайте клавишу BackSpace;
   - просмотр данных, которые проходят через COM порт регулируются ячейками
     1- COM1, 2-COM2, 3-COM3. 
     Значения для этих ячеек:
     1- просмотр уходящих с контроллера данных
     2- просмотр приходящих на контроллер данных
     3- просмотр и приходящих  и уходящих данных
     0- отмена вывода данных обмена через COM порт на экран
   - выводимые данные на ввод не влияют! Т.е. когда идет вывод информации на 
     экран, можно набирать любые другие комманды, даже если реально нельзя
     проследить за вводом.
~008^-01+10975001001

