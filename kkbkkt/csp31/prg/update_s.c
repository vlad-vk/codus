// coding=cp866
//---------------------------------------------------------------------------
vd  far UpdDataS(vd){
    //  количество пустых тиков
    TickLP1__V=TLoop;
    SecnLP1__V=SLoop;

    // Контроль обмена по сети NetBIOS
    if(HNBWCNT>0){
        NBLive1__V++; if(NBLive1__V>8){ NBLive1__V=1; }
    }

    // Контроль обмена по сети COM порта
    if(HCOMANS>0){ HCOMANS=0; HCOMCNT++; CPLiveT1_V=0; }
    if(HCOMCNT>0){
       CPLive1__V++; if(CPLive1__V>8){ CPLive1__V=1; }
       HCOMCNT=0;
    } 

    // проверка счетчика принятых пакетов от контроллера N20 (WS оператора)
    HNBWANS=WS_NB__YesNoVFN(20);
    // если были ответы от контроллера N20 увеличить счетчик ответов
    if(HNBWANS>0){ NBLiveT1_V=0; HNBWCNT++; if(HNBWCNT>10000) HNBWCNT=1; }
    else         { HNBWCNT   =0; }

    // Увеличить счетчики таймаутов
    NBLiveT1_V++; if(NBLiveT1_V>10){ NBLiveT1_V=10; }
    CPLiveT1_V++; if(CPLiveT1_V>10){ CPLiveT1_V=10; }
    // Установка переменной, отображающей работоспособность сети
    NetLive1_V++; if(NetLive1_V> 8){ NetLive1_V=0;  }

    // флаг выхода из программы
    if (ExitFLG1_M>0){ ExitForLoad=ExitFLG1_M; ExitFLG1_M=0; }

    // запись данных на диск
    if (WriteDT1_M>0){ WriteDT1_M=0; WriteDataP(); printf("W"); }

    // передача номера текущего сообщения
    if (FirstCall>PAMSG){
       if (CurMESS1_V!=nMESSAGE){ CurMESS1_V=nMESSAGE; }
    } else {
       MessageCLS();
    }
    // проверка флага звонка
    if (Bell(1,2)>0){ ErrBell1_V=1; DON50____V=1; }

    // сброс флага звонка
    if (ErrBell1_M>0){ 
        Bell(1,0); ErrBell1_V=0; ErrBell1_M=0; DON50____V=0; printf("B");
    }
    //-----------------------------------------------------------------------


    //-----------------------------------------------------------------------
    // Заполнение таблицы "НАСТРОЙКИ"
    AIP201_SZV=AIP201_SZM; AIP201_SDV=AIP201_SDM;
    AIP201__FV=AIP201__FM; AIP201__AV=AIP201__AM;
    AIP202_SZV=AIP202_SZM; AIP202_SDV=AIP202_SDM;
    AIP202__FV=AIP202__FM; AIP202__AV=AIP202__AM;
    AIP203_SZV=AIP203_SZM; AIP203_SDV=AIP203_SDM;
    AIP203__FV=AIP203__FM; AIP203__AV=AIP203__AM;
    AIF301_SZV=AIF301_SZM; AIF301_SDV=AIF301_SDM;
    AIF301__FV=AIF301__FM; AIF301__AV=AIF301__AM;
    AIF302_SZV=AIF302_SZM; AIF302_SDV=AIF302_SDM;
    AIF302__FV=AIF302__FM; AIF302__AV=AIF302__AM;
    AIF311_SZV=AIF311_SZM; AIF311_SDV=AIF311_SDM;
    AIF311__FV=AIF311__FM; AIF311__AV=AIF311__AM;
    AIF321_SZV=AIF321_SZM; AIF321_SDV=AIF321_SDM;
    AIF321__FV=AIF321__FM; AIF321__AV=AIF321__AM;
    AIF322_SZV=AIF322_SZM; AIF322_SDV=AIF322_SDM;
    AIF322__FV=AIF322__FM; AIF322__AV=AIF322__AM;

    AIP311_SZV=AIP311_SZM; AIP311_SDV=AIP311_SDM;
    AIP311__FV=AIP311__FM; AIP311__AV=AIP311__AM;
    AIP321_SZV=AIP321_SZM; AIP321_SDV=AIP321_SDM;
    AIP321__FV=AIP321__FM; AIP321__AV=AIP321__AM;
    AIP322_SZV=AIP322_SZM; AIP322_SDV=AIP322_SDM;
    AIP322__FV=AIP322__FM; AIP322__AV=AIP322__AM;
    AIP331_SZV=AIP331_SZM; AIP331_SDV=AIP331_SDM;
    AIP331__FV=AIP331__FM; AIP331__AV=AIP331__AM;
    AIP34B_SZV=AIP34B_SZM; AIP34B_SDV=AIP34B_SDM;
    AIP34B__FV=AIP34B__FM; AIP34B__AV=AIP34B__AM;
    AIP37B_SZV=AIP37B_SZM; AIP37B_SDV=AIP37B_SDM;
    AIP37B__FV=AIP37B__FM; AIP37B__AV=AIP37B__AM;
    AIP38B_SZV=AIP38B_SZM; AIP38B_SDV=AIP38B_SDM;
    AIP38B__FV=AIP38B__FM; AIP38B__AV=AIP38B__AM;
    AIP40B_SZV=AIP40B_SZM; AIP40B_SDV=AIP40B_SDM;
    AIP40B__FV=AIP40B__FM; AIP40B__AV=AIP40B__AM;

    AIF40V_SZV=AIF40V_SZM; AIF40V_SDV=AIF40V_SDM;
    AIF40V__FV=AIF40V__FM; AIF40V__AV=AIF40V__AM;
    AIX031_SZV=AIX031_SZM; AIX031_SDV=AIX031_SDM;
    AIX031__FV=AIX031__FM; AIX031__AV=AIX031__AM;
    AIX032_SZV=AIX032_SZM; AIX032_SDV=AIX032_SDM;
    AIX032__FV=AIX032__FM; AIX032__AV=AIX032__AM;
    AIX033_SZV=AIX033_SZM; AIX033_SDV=AIX033_SDM;
    AIX033__FV=AIX033__FM; AIX033__AV=AIX033__AM;
    AIX034_SZV=AIX034_SZM; AIX034_SDV=AIX034_SDM;
    AIX034__FV=AIX034__FM; AIX034__AV=AIX034__AM;
    AIX035_SZV=AIX035_SZM; AIX035_SDV=AIX035_SDM;
    AIX035__FV=AIX035__FM; AIX035__AV=AIX035__AM;
    AIX036_SZV=AIX036_SZM; AIX036_SDV=AIX036_SDM;
    AIX036__FV=AIX036__FM; AIX036__AV=AIX036__AM;
    AIX037_SZV=AIX037_SZM; AIX037_SDV=AIX037_SDM;
    AIX037__FV=AIX037__FM; AIX037__AV=AIX037__AM;

    AIT101_SZV=AIT101_SZM; AIT101_SDV=AIT101_SDM;
    AIT101__FV=AIT101__FM; AIT101__AV=AIT101__AM;
    AIT102_SZV=AIT102_SZM; AIT102_SDV=AIT102_SDM;
    AIT102__FV=AIT102__FM; AIT102__AV=AIT102__AM;
    AIT103_SZV=AIT103_SZM; AIT103_SDV=AIT103_SDM;
    AIT103__FV=AIT103__FM; AIT103__AV=AIT103__AM;

    AIT104_SZV=AIT104_SZM; AIT104_SDV=AIT104_SDM;
    AIT104__FV=AIT104__FM; AIT104__AV=AIT104__AM;
    AIT105_SZV=AIT105_SZM; AIT105_SDV=AIT105_SDM;
    AIT105__FV=AIT105__FM; AIT105__AV=AIT105__AM;
    AIT106_SZV=AIT106_SZM; AIT106_SDV=AIT106_SDM;
    AIT106__FV=AIT106__FM; AIT106__AV=AIT106__AM;

    AIT311_SZV=AIT311_SZM; AIT311_SDV=AIT311_SDM;
    AIT311__FV=AIT311__FM; AIT311__AV=AIT311__AM;
    AIT321_SZV=AIT321_SZM; AIT321_SDV=AIT321_SDM;
    AIT321__FV=AIT321__FM; AIT321__AV=AIT321__AM;
    AIT322_SZV=AIT322_SZM; AIT322_SDV=AIT322_SDM;
    AIT322__FV=AIT322__FM; AIT322__AV=AIT322__AM;

    AIT331_SZV=AIT331_SZM; AIT331_SDV=AIT331_SDM;
    AIT331__FV=AIT331__FM; AIT331__AV=AIT331__AM;
    AIT37A_SZV=AIT37A_SZM; AIT37A_SDV=AIT37A_SDM;
    AIT37A__FV=AIT37A__FM; AIT37A__AV=AIT37A__AM;
    AIT38A_SZV=AIT38A_SZM; AIT38A_SDV=AIT38A_SDM;
    AIT38A__FV=AIT38A__FM; AIT38A__AV=AIT38A__AM;

    AIT332_SZV=AIT332_SZM; AIT332_SDV=AIT332_SDM;
    AIT332__FV=AIT332__FM; AIT332__AV=AIT332__AM;
    AIT421_SZV=AIT421_SZM; AIT421_SDV=AIT421_SDM;
    AIT421__FV=AIT421__FM; AIT421__AV=AIT421__AM;
    AIT422_SZV=AIT422_SZM; AIT422_SDV=AIT422_SDM;
    AIT422__FV=AIT422__FM; AIT422__AV=AIT422__AM;


    AIF303_SZV=AIF303_SZM; AIF303_SDV=AIF303_SDM;
    AIF303__FV=AIF303__FM; AIF303__AV=AIF303__AM;
    AIF304_SZV=AIF304_SZM; AIF304_SDV=AIF304_SDM;
    AIF304__FV=AIF304__FM; AIF304__AV=AIF304__AM;

    AIF331_SZV=AIF331_SZM; AIF331_SDV=AIF331_SDM;
    AIF331__FV=AIF331__FM; AIF331__AV=AIF331__AM;
    AIF332_SZV=AIF332_SZM; AIF332_SDV=AIF332_SDM;
    AIF332__FV=AIF332__FM; AIF332__AV=AIF332__AM;

    AIF34V_SZV=AIF34V_SZM; AIF34V_SDV=AIF34V_SDM;
    AIF34V__FV=AIF34V__FM; AIF34V__AV=AIF34V__AM;
    AIF35V_SZV=AIF35V_SZM; AIF35V_SDV=AIF35V_SDM;
    AIF35V__FV=AIF35V__FM; AIF35V__AV=AIF35V__AM;

    AIF36V_SZV=AIF36V_SZM; AIF36V_SDV=AIF36V_SDM;
    AIF36V__FV=AIF36V__FM; AIF36V__AV=AIF36V__AM;
    AIX0C1_SZV=AIX0C1_SZM; AIX0C1_SDV=AIX0C1_SDM;
    AIX0C1__FV=AIX0C1__FM; AIX0C1__AV=AIX0C1__AM;

    AIF37V_SZV=AIF37V_SZM; AIF37V_SDV=AIF37V_SDM;
    AIF37V__FV=AIF37V__FM; AIF37V__AV=AIF37V__AM;
    AIF38V_SZV=AIF38V_SZM; AIF38V_SDV=AIF38V_SDM;
    AIF38V__FV=AIF38V__FM; AIF38V__AV=AIF38V__AM;
    //-----------------------------------------------------------------------

    //-----------------------------------------------------------------------
    // Заполнение таблицы "СИГНАЛИЗАЦИЯ"
    AIP201_AZV=AIP201_AZM; AIP201_AMV=AIP201_AMM;
    AIP202_AZV=AIP202_AZM; AIP202_AMV=AIP202_AMM;
    AIP203_AZV=AIP203_AZM; AIP203_AMV=AIP203_AMM;
    AIF301_AZV=AIF301_AZM; AIF301_AMV=AIF301_AMM;
    AIF302_AZV=AIF302_AZM; AIF302_AMV=AIF302_AMM;
    AIF311_AZV=AIF311_AZM; AIF311_AMV=AIF311_AMM;
    AIF321_AZV=AIF321_AZM; AIF321_AMV=AIF321_AMM;
    AIF322_AZV=AIF322_AZM; AIF322_AMV=AIF322_AMM;

    AIP311_AZV=AIP311_AZM; AIP311_AMV=AIP311_AMM;
    AIP321_AZV=AIP321_AZM; AIP321_AMV=AIP321_AMM;
    AIP322_AZV=AIP322_AZM; AIP322_AMV=AIP322_AMM;
    AIP331_AZV=AIP331_AZM; AIP331_AMV=AIP331_AMM;
    AIP34B_AZV=AIP34B_AZM; AIP34B_AMV=AIP34B_AMM;
    AIP37B_AZV=AIP37B_AZM; AIP37B_AMV=AIP37B_AMM;
    AIP38B_AZV=AIP38B_AZM; AIP38B_AMV=AIP38B_AMM;
    AIP40B_AZV=AIP40B_AZM; AIP40B_AMV=AIP40B_AMM;

    AIF40V_AZV=AIF40V_AZM; AIF40V_AMV=AIF40V_AMM;
    AIX031_AZV=AIX031_AZM; AIX031_AMV=AIX031_AMM;
    AIX032_AZV=AIX032_AZM; AIX032_AMV=AIX032_AMM;
    AIX033_AZV=AIX033_AZM; AIX033_AMV=AIX033_AMM;
    AIX034_AZV=AIX034_AZM; AIX034_AMV=AIX034_AMM;
    AIX035_AZV=AIX035_AZM; AIX035_AMV=AIX035_AMM;
    AIX036_AZV=AIX036_AZM; AIX036_AMV=AIX036_AMM;
    AIX037_AZV=AIX037_AZM; AIX037_AMV=AIX037_AMM;

    AIT101_AZV=AIT101_AZM; AIT101_AMV=AIT101_AMM;
    AIT102_AZV=AIT102_AZM; AIT102_AMV=AIT102_AMM;
    AIT103_AZV=AIT103_AZM; AIT103_AMV=AIT103_AMM;

    AIT104_AZV=AIT104_AZM; AIT104_AMV=AIT104_AMM;
    AIT105_AZV=AIT105_AZM; AIT105_AMV=AIT105_AMM;
    AIT106_AZV=AIT106_AZM; AIT106_AMV=AIT106_AMM;

    AIT311_AZV=AIT311_AZM; AIT311_AMV=AIT311_AMM;
    AIT321_AZV=AIT321_AZM; AIT321_AMV=AIT321_AMM;
    AIT322_AZV=AIT322_AZM; AIT322_AMV=AIT322_AMM;

    AIT331_AZV=AIT331_AZM; AIT331_AMV=AIT331_AMM;
    AIT37A_AZV=AIT37A_AZM; AIT37A_AMV=AIT37A_AMM;
    AIT38A_AZV=AIT38A_AZM; AIT38A_AMV=AIT38A_AMM;

    AIT332_AZV=AIT332_AZM; AIT332_AMV=AIT332_AMM;
    AIT421_AZV=AIT421_AZM; AIT421_AMV=AIT421_AMM;
    AIT422_AZV=AIT422_AZM; AIT422_AMV=AIT422_AMM;


    AIF303_AZV=AIF303_AZM; AIF303_AMV=AIF303_AMM;
    AIF304_AZV=AIF304_AZM; AIF304_AMV=AIF304_AMM;

    AIF331_AZV=AIF331_AZM; AIF331_AMV=AIF331_AMM;
    AIF332_AZV=AIF332_AZM; AIF332_AMV=AIF332_AMM;

    AIF34V_AZV=AIF34V_AZM; AIF34V_AMV=AIF34V_AMM;
    AIF35V_AZV=AIF35V_AZM; AIF35V_AMV=AIF35V_AMM;

    AIF36V_AZV=AIF36V_AZM; AIF36V_AMV=AIF36V_AMM;
    AIX0C1_AZV=AIX0C1_AZM; AIX0C1_AMV=AIX0C1_AMM;

    AIF37V_AZV=AIF37V_AZM; AIF37V_AMV=AIF37V_AMM;
    AIF38V_AZV=AIF38V_AZM; AIF38V_AMV=AIF38V_AMM;
    //-----------------------------------------------------------------------


    return;
}
//---------------------------------------------------------------------------
