#-----------------------------------------------------------------------------
#  Комманды этого файла вызываются 18 раз/секунду (каждый пользовательский тик)
#  x0000 - (7) временные  переменные
#  p0000 - (0) переменные общего массива (базы каналов)
#  l0000 - (1) переменные локального массива
#  c0000 - переменные массива COM порта
#  n0000 - переменные массива NetBIOS
#  t0000 - переменные массива TCPIP
#  y0000 - (6) переменные массива комманды 'y'
#-----------------------------------------------------------------------------


#  ОПРЕДЕЛЕНИЕ ПЕРЕМЕННЫХ:
#-----------------------------------------------------------------------------
   %РУЧ            = 0                      ;
   %АВТ            = 1                      ;
   %ВЫК            = 0                      ;
   %ВКЛ            = 1                      ;
   %НЕТ            = 0                      ;
   %ДА             = 1                      ;
   %КРАСНЫЙ        = 0                      ;
   %СИНИЙ          = 1                      ;
   %ГОЛУБОЙ        = 1                      ;
   %ЗЕЛЕНЫЙ        = 2                      ;
   %ЖЕЛТЫЙ         = 3                      ;
#--------------------------------------------
   %ПАРОЛЬ_К               = 787878         ;
   %ПАРОЛЬ_Т               = 454545         ;
   %ПАРОЛЬ_СТАРТ           = 12             ;
   %ПАРОЛЬ_СТОП            = 56             ;
   %ПАРОЛЬ_ВСЕ_ВЫКЛ        = 90             ;
   %ПАРОЛЬ_СТАРТ_ЗАП       = x0031          ;
   %ПАРОЛЬ_СТОП_ЗАП        = x0032          ;
   %ПАРОЛЬ_ВСЕ_ВЫКЛ_ЗАП    = x0033          ;
#--------------------------------------------
   %ЦВЕТ_ПАРОЛЯ_К          = x0021          ;
   %ЦВЕТ_ПАРОЛЯ_Т          = x0022          ;
   %ЦВЕТ_РАБОТЫ_ПРОЦЕССОРА = l0044          ;
#--------------------------------------------
   %КЛАВИША_У              = 5              ;
   %КЛАВИША_Д              = 12             ;
   %КЛАВИША_S              = 19             ;
   %КЛАВИША_F11            = 57             ;
   %КЛАВИША_F12            = 58             ;
   %КЛАВИША_ESC            = 59             ;
   %КЛАВИША_ENTER          = 67             ;
   %КЛАВИША_ZERO           = 0              ;
   %ТЕКУЩИЙ_ЦИКЛ_ЗВОНКА    = x0023          ;
   %ТЕКУЩИЙ_ЦИКЛ_ЗАПИСИ    = x0024          ;
#--------------------------------------------
   %КЛАВИША_МЕНЮ           = l0004          ;
   %КЛАВИША_УСТАНОВКА      = l0032          ;
   %НАЖАТАЯ_КЛАВИША        = l0007          ;
   %ГЕНЕРИРУЕМАЯ_КЛАВИША   = l0005          ;
   %ВИРТУАЛЬНАЯ_КЛАВИША    = x0030          ;
   %ВВОД_ДАННЫХ            = l0006          ;
#--------------------------------------------
   %ФЛАГ_ПЕРЕДАЧИ_ЗНАЧЕНИЯ = l0019          ;
   %СТРОК_В_ТЕКУЩЕМ_ФАЙЛЕ  = l0069          ;
   %СТРОК_В_ТФЛ_ДЛЯ_КОДУС  = y0069          ;
#--------------------------------------------
   %СЕКУНДА_НОВАЯ          = x0101          ;
   %СЕКУНДА_ЗАПИС          = x0100          ;
   %СЕКУНДА_КОДУС          = l0041          ;
   %СЧЕТЧИК_ТИКОВ          = x0001          ;
   %СИГНАЛИЗАЦИЯ           = l0043          ;
   %СИГНАЛИЗАЦИЯ_1         = x0002          ;
   %СИГНАЛИЗАЦИЯ_ФЛАГ      = x0003          ;
#--------------------------------------------
   %НОМЕР_ЭКРАНА           = l0031          ;
   %ФЛАГ_КОНТРОЛЯ_ЭКРАНА   = x0025          ;
   %ФЛАГ_ЗАПРЕТА_ИЗМЕНЕНИЙ = l0020          ;
   %ФЛАГ_ЗАПРЕТА_МЕНЮ      = l0021          ;
   %ПАРОЛЬ_ВВОД__КИП       = l0045          ;
   %ПАРОЛЬ_ТЕКУЩ_КИП       = l0046          ;
   %ПАРОЛЬ_ВВОД__ТЕХ       = l0047          ;
   %ПАРОЛЬ_ТЕКУЩ_ТЕХ       = l0048          ;
#--------------------------------------------
   %НОМЕР_СООБЩЕНИЯ_ВЫВОДА = l0033          ;
   %СЕК_ОТОБРАЖ_СООБЩЕНИЯ  = l0034          ;
   %СООБЩЕНИЕ_ОШИБКИ       = l0035          ;
#--------------------------------------------
   %МАСЛОСТАНЦИЯ_СЧЕТ      = x0040          ;
   %МАСЛОСТАНЦИЯ1          = x0041          ;
   %МАСЛОСТАНЦИЯ2          = x0042          ;
   %МАСЛОСТАНЦИЯ3          = x0043          ;
   %МАСЛОСТАНЦИЯ4          = x0044          ;
   %МАСЛОСТАНЦИЯ5          = x0045          ;
   %МАСЛОСТАНЦИЯ6          = x0046          ;
   %ВАКУУМНЫЙ_НАСОС        = x0047          ;
   %ВАКУУМНЫЙ_НАСОС_Ф      = x0048          ;
   %ВАКУУМНЫЙ_НАСОС_Р      = x0049          ;
   %ВАКУУМНЫЙ_НАСОС_К      = x0050          ;
#-----------------------------------------------------------------------------
#  передача кода авторизации в CODUS
if $SystemD1_V > 0                          ;
if $SystemD1_V < 10                         ;
   l0058  = $SystemD1_V                     ;
fi                                          ;
fi                                          ;
if $SystemD3_V > 0                          ;
if $SystemD3_V < 10                         ;
   l0058  = $SystemD3_V                     ;
fi                                          ;
fi                                          ;
if $SystemD5_V > 0                          ;
if $SystemD5_V < 10                         ;
   l0058  = $SystemD5_V                     ;
fi                                          ;
fi                                          ;
#-----------------------------------------------------------------------------


#  ИНИЦИАЛИЗАЦИЯ ПЕРЕМЕННЫХ:
#-----------------------------------------------------------------------------
#  определение паролей
   %ПАРОЛЬ_ТЕКУЩ_КИП       = %ПАРОЛЬ_К      ;
   %ПАРОЛЬ_ТЕКУЩ_ТЕХ       = %ПАРОЛЬ_Т      ;
#-----------------------------------------------------------------------------
#  макс кол строк текущ файла просмотра (для вывода кол строк)
   %СТРОК_В_ТФЛ_ДЛЯ_КОДУС = %СТРОК_В_ТЕКУЩЕМ_ФАЙЛЕ    ;
#-----------------------------------------------------------------------------
#  установка флага новой секунды
   %СЕКУНДА_НОВАЯ = %ВЫК                    ;
if %СЕКУНДА_ЗАПИС ! %СЕКУНДА_КОДУС          ;
   %СЕКУНДА_НОВАЯ = %ВКЛ                    ;
fi                                          ;
   %СЕКУНДА_ЗАПИС = %СЕКУНДА_КОДУС          ;
#-----------------------------------------------------------------------------


#  ОТОБРАЖЕНИЕ ЗНАКА "ВНИМАНИЕ" ПРИ ОШИБКАХ:
#-----------------------------------------------------------------------------
   %СИГНАЛИЗАЦИЯ_ФЛАГ = %ВЫКЛ          ;
if $ErrBell1_V ! %ВЫКЛ                 ; # если установлен флаг звонка
   %СИГНАЛИЗАЦИЯ_ФЛАГ = %ВКЛ           ;
fi                                     ;
if $ErrBell3_V ! %ВЫКЛ                 ; 
   %СИГНАЛИЗАЦИЯ_ФЛАГ = %ВКЛ           ;
fi                                     ;
if $ErrBell5_V ! %ВЫКЛ                 ; 
   %СИГНАЛИЗАЦИЯ_ФЛАГ = %ВКЛ           ;
fi                                     ;
if %СИГНАЛИЗАЦИЯ_ФЛАГ ! %ВЫКЛ          ; # если установлен флаг звонка -
   %СЧЕТЧИК_ТИКОВ = %СЧЕТЧИК_ТИКОВ + 1 ; # счетать тики
el                                     ;
   %СИГНАЛИЗАЦИЯ  = %ВЫКЛ              ; # перемен из локал базы 
fi                                     ; # для вывода анимированного значка (!)
if %СЧЕТЧИК_ТИКОВ   >  9               ;
   %СЧЕТЧИК_ТИКОВ   =  0               ; # каждые пол секунды менять 
   if %СИГНАЛИЗАЦИЯ >  0               ; # изображение (мигающий значек)
      %СИГНАЛИЗАЦИЯ =  0               ;
   el                                  ;
      if %СИГНАЛИЗАЦИЯ_1 = 1           ;
         %СИГНАЛИЗАЦИЯ   = 2           ;
      el                               ;
         %СИГНАЛИЗАЦИЯ   = 1           ;
      fi                               ;
      %СИГНАЛИЗАЦИЯ_1 = %СИГНАЛИЗАЦИЯ  ;
   fi                                  ;
fi                                     ;
#-----------------------------------------------------------------------------


# КОНТРОЛЬ ДОСТУПА К ЭКРАНАМ ПО ПАРОЛЮ:
#-----------------------------------------------------------------------------
%ФЛАГ_ЗАПРЕТА_ИЗМЕНЕНИЙ = 0  ;    # флаг запрета изменений
%ФЛАГ_ЗАПРЕТА_МЕНЮ      = 0  ;    # флаг запрета меню
%ЦВЕТ_ПАРОЛЯ_К          = 0  ;    # цвет надписи когда введен пароль КИП и А
%ЦВЕТ_ПАРОЛЯ_Т          = 0  ;    # цвет надписи когда введен пароль ТЕХНОЛОГА

#----------------------------------------------
# цвет надписи когда не введен пароль КИП и А
if %ПАРОЛЬ_ТЕКУЩ_КИП ! %ПАРОЛЬ_ВВОД__КИП    ;
   %ЦВЕТ_ПАРОЛЯ_К  = 8                      ;    
fi                                          ;
                                            
#----------------------------------------------
# цвет надписи когда не введен пароль ТЕХНОЛОГА
if %ПАРОЛЬ_ТЕКУЩ_ТЕХ ! %ПАРОЛЬ_ВВОД__ТЕХ    ;
   %ЦВЕТ_ПАРОЛЯ_Т = 8                       ;    
fi                                          ;

%ФЛАГ_КОНТРОЛЯ_ЭКРАНА    = %ВЫКЛ            ; # экран контролируется паролем

if %НОМЕР_ЭКРАНА = 3                        ; # экран "СИСТЕМА" (E 3)
   %ФЛАГ_КОНТРОЛЯ_ЭКРАНА = %ВКЛ             ;
fi                                          ;
if %НОМЕР_ЭКРАНА = 8                        ; # экран "МОДУЛИ I7042"
   %ФЛАГ_КОНТРОЛЯ_ЭКРАНА = %ВКЛ             ;
fi                                          ;
if %НОМЕР_ЭКРАНА = 4                        ; # экран "ДИАПАЗОН" | "ОТЛАДКА"
   %ФЛАГ_КОНТРОЛЯ_ЭКРАНА = %ВКЛ             ;
fi                                          ;
if %НОМЕР_ЭКРАНА = 5                        ; # экран "СИГНАЛИЗАЦИЯ"
   %ФЛАГ_КОНТРОЛЯ_ЭКРАНА = %ВКЛ             ;
fi                                          ;
#-----------------------------------------------------------------------------


#  ПЕРЕХОД НА ЭКРАНЫ "ТЕСТ1" и "ТЕСТ2"
#-----------------------------------------------------------------------------
if %НАЖАТАЯ_КЛАВИША = %КЛАВИША_F11           ; # выбран переход на экран "ТЕСТ1"
   if %ПАРОЛЬ_ТЕКУЩ_КИП  ! %ПАРОЛЬ_ВВОД__КИП ; # если не введен пароль КИП и А
      %КЛАВИША_УСТАНОВКА = %ВКЛ              ; # клавиши (никаких действий)
   fi                                        ;
fi                                           ;
#---------------------------------------------
if %НАЖАТАЯ_КЛАВИША = %КЛАВИША_F12           ; # выбран переход на экран "ТЕСТ2"
   if %ПАРОЛЬ_ТЕКУЩ_КИП  ! %ПАРОЛЬ_ВВОД__КИП ;
      %КЛАВИША_УСТАНОВКА = %ВКЛ              ;
   fi                                        ;
fi                                           ;
#-----------------------------------------------------------------------------


#  при нажатии клавиши ESC после закрытия окна ввода или запроса-
#  снимается звуковой сигнал
#-----------------------------------------------------------------------------
if %ВИРТУАЛЬНАЯ_КЛАВИША > 0                      ; # после нажат клавиши ESC 
   if %СЕКУНДА_НОВАЯ    = %ДА                    ; # генерируется
      %НАЖАТАЯ_КЛАВИША  = %ВИРТУАЛЬНАЯ_КЛАВИША   ; # нажатие клавиши 'S' для 
      %ВИРТУАЛЬНАЯ_КЛАВИША  = %КЛАВИША_ZERO      ; # снятия сигнала ошибки
      %КЛАВИША_УСТАНОВКА    = %ВКЛ               ;
      %ГЕНЕРИРУЕМАЯ_КЛАВИША = %КЛАВИША_ZERO      ; # сбросить код посл генерир 
   fi                                            ; # клавиши запр оператора
fi                                               ;
if %НАЖАТАЯ_КЛАВИША = %КЛАВИША_ESC               ; # если нажата клавиша ESC
   %ВИРТУАЛЬНАЯ_КЛАВИША  = %КЛАВИША_S            ; # установить нажатие клавиши
fi                                               ; # 'S' для  след цикла
if %ГЕНЕРИРУЕМАЯ_КЛАВИША = %КЛАВИША_ESC          ; # клавиш ESC генерир запрос
   %ВИРТУАЛЬНАЯ_КЛАВИША  = %КЛАВИША_S            ; # установить нажатие клавиши 
fi                                               ; # 'S' для след цикла
#-----------------------------------------------------------------------------
#  сброс сигнала ошибки на всех контроллерах при нажатии "S"
if %НАЖАТАЯ_КЛАВИША         =  19                ;
   %ТЕКУЩИЙ_ЦИКЛ_ЗВОНКА     =  1                 ;
#  o_Press_key_V_                                ;
fi                                               ;
if %ТЕКУЩИЙ_ЦИКЛ_ЗВОНКА     =  3                 ;
   %НАЖАТАЯ_КЛАВИША         =  3                 ; # "C"
   %КЛАВИША_УСТАНОВКА       = %ВКЛ               ;
   %ТЕКУЩИЙ_ЦИКЛ_ЗВОНКА     =  0                 ;
#  o_Press_key_C_                                ;
fi                                               ;
if %ТЕКУЩИЙ_ЦИКЛ_ЗВОНКА     =  2                 ;
   %НАЖАТАЯ_КЛАВИША         = 24                 ; # "X"
   %КЛАВИША_УСТАНОВКА       = %ВКЛ               ;
   %ТЕКУЩИЙ_ЦИКЛ_ЗВОНКА     =  3                 ;
#  o_Press_key_X_                                ;
fi                                               ;
if %ТЕКУЩИЙ_ЦИКЛ_ЗВОНКА     =  1                 ;
   %НАЖАТАЯ_КЛАВИША         = 26                 ; # "Z"
   %КЛАВИША_УСТАНОВКА       = %ВКЛ               ;
   %ТЕКУЩИЙ_ЦИКЛ_ЗВОНКА     =  2                 ;
#  o_Press_key_Z_                                ;
fi                                               ;
#-----------------------------------------------------------------------------
#  запись переменных программы на диск при нажатии "W"
if %НАЖАТАЯ_КЛАВИША         =  23                ;
   %ТЕКУЩИЙ_ЦИКЛ_ЗАПИСИ     =  1                 ;
fi                                               ;
if %ТЕКУЩИЙ_ЦИКЛ_ЗАПИСИ     =  3                 ;
   %НАЖАТАЯ_КЛАВИША         =  18                ; # "R"
   %КЛАВИША_УСТАНОВКА       = %ВКЛ               ;
   %ТЕКУЩИЙ_ЦИКЛ_ЗАПИСИ     =  0                 ;
fi                                               ;
if %ТЕКУЩИЙ_ЦИКЛ_ЗАПИСИ     =  2                 ;
   %НАЖАТАЯ_КЛАВИША         =  5                 ; # "E"
   %КЛАВИША_УСТАНОВКА       = %ВКЛ               ;
   %ТЕКУЩИЙ_ЦИКЛ_ЗАПИСИ     =  3                 ;
fi                                               ;
if %ТЕКУЩИЙ_ЦИКЛ_ЗАПИСИ     =  1                 ;
   %НАЖАТАЯ_КЛАВИША         = 17                 ; # "Q"
   %КЛАВИША_УСТАНОВКА       = %ВКЛ               ;
   %ТЕКУЩИЙ_ЦИКЛ_ЗАПИСИ     =  2                 ;
fi                                               ;
#-----------------------------------------------------------------------------



#  ПРОВЕРКА ЗАКРЫТИЯ ЭКРАНОВ ПАРОЛЕМ:
#-----------------------------------------------------------------------------
if %ВВОД_ДАННЫХ = %ВЫКЛ                           ;
   if %ПАРОЛЬ_ТЕКУЩ_КИП  ! %ПАРОЛЬ_ВВОД__КИП      ;
      if %ФЛАГ_КОНТРОЛЯ_ЭКРАНА   = %ВКЛ           ;
         %ФЛАГ_ЗАПРЕТА_ИЗМЕНЕНИЙ = %ВКЛ           ;
         %ФЛАГ_ЗАПРЕТА_МЕНЮ      = %ВКЛ           ;
         if %НАЖАТАЯ_КЛАВИША     = %КЛАВИША_ENTER ;
            %НОМЕР_СООБЩЕНИЯ_ВЫВОДА = 5           ;
            %СООБЩЕНИЕ_ОШИБКИ    = %ВКЛ           ;
         fi                                       ;
      fi                                          ;
      # Если нажата клавиша 'Д'(ДИАПАЗОНЫ) и не введен пароль- предупреждение
      if %НАЖАТАЯ_КЛАВИША        = %КЛАВИША_Д     ;        
         %НАЖАТАЯ_КЛАВИША        = %КЛАВИША_ZERO  ;
         %КЛАВИША_УСТАНОВКА      = %ВКЛ           ;
         %НОМЕР_СООБЩЕНИЯ_ВЫВОДА = 4              ;
         %СЕК_ОТОБРАЖ_СООБЩЕНИЯ  = 10             ;
         %СООБЩЕНИЕ_ОШИБКИ       = %ВКЛ           ;
      fi ;
   fi                                             ;
   if %ПАРОЛЬ_ТЕКУЩ_ТЕХ  ! %ПАРОЛЬ_ВВОД__ТЕХ      ;
      if %ФЛАГ_КОНТРОЛЯ_ЭКРАНА   = 2              ;
         %ФЛАГ_ЗАПРЕТА_ИЗМЕНЕНИЙ = %ВКЛ           ;
         %ФЛАГ_ЗАПРЕТА_МЕНЮ      = %ВКЛ           ;
         if %НАЖАТАЯ_КЛАВИША     = %КЛАВИША_ENTER ;
            %НОМЕР_СООБЩЕНИЯ_ВЫВОДА = 7           ;
            %СООБЩЕНИЕ_ОШИБКИ    = %ВКЛ           ;
         fi                                       ;
      fi                                          ;
      # Если нажата клавиша 'С'(СИГНАЛИЗАЦИЯ) и не введен пароль-предупреждение
      if %НАЖАТАЯ_КЛАВИША        = %КЛАВИША_С     ;        
         %НАЖАТАЯ_КЛАВИША        = %КЛАВИША_ZERO  ;
         %КЛАВИША_УСТАНОВКА      = %ВКЛ           ;
         %НОМЕР_СООБЩЕНИЯ_ВЫВОДА = 6              ;
         %СЕК_ОТОБРАЖ_СООБЩЕНИЯ  = 10             ;
         %СООБЩЕНИЕ_ОШИБКИ       = %ВКЛ           ;
      fi                                          ;
   fi                                             ;
fi                                                ;
#-----------------------------------------------------------------------------


#  Проверка кодов доступа
#-----------------------------------------------------------------------------
if %НОМЕР_ЭКРАНА = 2                                    ;
   %СЕК_ОТОБРАЖ_СООБЩЕНИЯ        = 10                   ;
   %СООБЩЕНИЕ_ОШИБКИ             = %ВКЛ                 ;
   #-----------------------------------------------------
   if %ПАРОЛЬ_СТАРТ_ЗАП          ! %ПАРОЛЬ_СТАРТ        ;
      if %ПАРОЛЬ_СТАРТ_ЗАП       > 0                    ;
         %НОМЕР_СООБЩЕНИЯ_ВЫВОДА = 8                    ;
      fi                                                ;
      y0051 = 2                                         ;
   fi                                                   ;
   if %ПАРОЛЬ_СТАРТ_ЗАП          = %ПАРОЛЬ_СТАРТ        ;
      %НОМЕР_СООБЩЕНИЯ_ВЫВОДА    = 11                   ;
      y0051 = 1                                         ;
   fi                                                   ;
   %ПАРОЛЬ_СТАРТ_ЗАП             = 0                    ;
   #-----------------------------------------------------
   if %ПАРОЛЬ_СТОП_ЗАП           ! %ПАРОЛЬ_СТОП         ;
      if %ПАРОЛЬ_СТОП_ЗАП        > 0                    ;
         %НОМЕР_СООБЩЕНИЯ_ВЫВОДА = 9                    ;
      fi                                                ;
      y0052 = 2                                         ;
   fi                                                   ;
   if %ПАРОЛЬ_СТОП_ЗАП           = %ПАРОЛЬ_СТОП         ;
      %НОМЕР_СООБЩЕНИЯ_ВЫВОДА    = 12                   ;
      y0052 = 1                                         ;
   fi                                                   ;
   %ПАРОЛЬ_СТОП_ЗАП              = 0                    ;
   #-----------------------------------------------------
   if %ПАРОЛЬ_ВСЕ_ВЫКЛ_ЗАП       ! %ПАРОЛЬ_ВСЕ_ВЫКЛ     ;
      if %ПАРОЛЬ_ВСЕ_ВЫКЛ_ЗАП    > 0                    ;
         %НОМЕР_СООБЩЕНИЯ_ВЫВОДА = 10                   ;
      fi                                                ;
      y0053 = 2                                         ;
   fi                                                   ;
   if %ПАРОЛЬ_ВСЕ_ВЫКЛ_ЗАП       = %ПАРОЛЬ_ВСЕ_ВЫКЛ     ;
      %НОМЕР_СООБЩЕНИЯ_ВЫВОДА    = 13                   ;
      y0053 = 1                                         ;
   fi                                                   ;
   %ПАРОЛЬ_ВСЕ_ВЫКЛ_ЗАП          = 0                    ;
   #-----------------------------------------------------
   %ФЛАГ_ПЕРЕДАЧИ_ЗНАЧЕНИЯ       = %ДА                  ;
   #-----------------------------------------------------
   #  АК1                                               ;
   if y0014          = 1                                ;
      if y0051       = 1                                ;
         $A1CYCRN__M = 1                                ;
      fi                                                ;
      if y0052       = 1                                ;
         $A1CYCST__M = 1                                ;
      fi                                                ;
      if y0053       = 1                                ;
         $A1ISPST__M = 1                                ;
      fi                                                ;
   fi                                                   ;
   #-----------------------------------------------------
   #  АК2                                               ;
   if y0014          = 2                                ;
      if y0051       = 1                                ;
         $A2CYCRN__M = 1                                ;
      fi                                                ;
      if y0052       = 1                                ;
         $A2CYCST__M = 1                                ;
      fi                                                ;
      if y0053       = 1                                ;
         $A2ISPST__M = 1                                ;
      fi                                                ;
   fi                                                   ;
   #-----------------------------------------------------
   #  АК3                                               ;
   if y0014          = 3                                ;
      if y0051       = 1                                ;
         $A3CYCRN__M = 1                                ;
      fi                                                ;
      if y0052       = 1                                ;
         $A3CYCST__M = 1                                ;
      fi                                                ;
      if y0053       = 1                                ;
         $A3ISPST__M = 1                                ;
      fi                                                ;
   fi                                                   ;
   #-----------------------------------------------------
   #  АК4                                               ;
   if y0014          = 4                                ;
      if y0051       = 1                                ;
         $A4CYCRN__M = 1                                ;
      fi                                                ;
      if y0052       = 1                                ;
         $A4CYCST__M = 1                                ;
      fi                                                ;
      if y0053       = 1                                ;
         $A4ISPST__M = 1                                ;
      fi                                                ;
   fi                                                   ;
   #-----------------------------------------------------
   #  АК5                                               ;
   if y0014          = 5                                ;
      if y0051       = 1                                ;
         $A5CYCRN__M = 1                                ;
      fi                                                ;
      if y0052       = 1                                ;
         $A5CYCST__M = 1                                ;
      fi                                                ;
      if y0053       = 1                                ;
         $A5ISPST__M = 1                                ;
      fi                                                ;
   fi                                                   ;
   #-----------------------------------------------------
   #  АК6                                               ;
   if y0014          = 6                                ;
      if y0051       = 1                                ;
         $A6CYCRN__M = 1                                ;
      fi                                                ;
      if y0052       = 1                                ;
         $A6CYCST__M = 1                                ;
      fi                                                ;
      if y0053       = 1                                ;
         $A6ISPST__M = 1                                ;
      fi                                                ;
   fi                                                   ;
   #-----------------------------------------------------
   %ФЛАГ_ПЕРЕДАЧИ_ЗНАЧЕНИЯ = %НЕТ                       ;
fi                                                      ;
#-----------------------------------------------------------------------------


#  Маслостанции (отображение работы гидронасосов)
#-----------------------------------------------------------------------------
   %МАСЛОСТАНЦИЯ_СЧЕТ   = %МАСЛОСТАНЦИЯ_СЧЕТ + 1        ;
if %МАСЛОСТАНЦИЯ_СЧЕТ   > 1                             ;
   %МАСЛОСТАНЦИЯ_СЧЕТ   = 0                             ;
   #-----------------------------------------------------
   if $I1GNS_1__V       > 0                             ;
      %МАСЛОСТАНЦИЯ1    = %МАСЛОСТАНЦИЯ1 + 1            ;
      if %МАСЛОСТАНЦИЯ1 > 3                             ;
         %МАСЛОСТАНЦИЯ1 = 1                             ;
      fi                                                ;
   el                                                   ;
      %МАСЛОСТАНЦИЯ1    = 0                             ;
   fi                                                   ;
   #-----------------------------------------------------
   if $I2GNS_1__V       > 0                             ;
      %МАСЛОСТАНЦИЯ2    = %МАСЛОСТАНЦИЯ2 + 1            ;
      if %МАСЛОСТАНЦИЯ2 > 3                             ;
         %МАСЛОСТАНЦИЯ2 = 1                             ;
      fi                                                ;
   el                                                   ;
      %МАСЛОСТАНЦИЯ2    = 0                             ;
   fi                                                   ;
   #-----------------------------------------------------
   if $I3GNS_1__V       > 0                             ;
      %МАСЛОСТАНЦИЯ3    = %МАСЛОСТАНЦИЯ3 + 1            ;
      if %МАСЛОСТАНЦИЯ3 > 3                             ;
         %МАСЛОСТАНЦИЯ3 = 1                             ;
      fi                                                ;
   el                                                   ;
      %МАСЛОСТАНЦИЯ3    = 0                             ;
   fi                                                   ;
   #-----------------------------------------------------
   if $I4GNS_1__V       > 0                             ;
      %МАСЛОСТАНЦИЯ4    = %МАСЛОСТАНЦИЯ4 + 1            ;
      if %МАСЛОСТАНЦИЯ4 > 3                             ;
         %МАСЛОСТАНЦИЯ4 = 1                             ;
      fi                                                ;
   el                                                   ;
      %МАСЛОСТАНЦИЯ4    = 0                             ;
   fi                                                   ;
   #-----------------------------------------------------
   if $I5GNS_1__V       > 0                             ;
      %МАСЛОСТАНЦИЯ5    = %МАСЛОСТАНЦИЯ5 + 1            ;
      if %МАСЛОСТАНЦИЯ5 > 3                             ;
         %МАСЛОСТАНЦИЯ5 = 1                             ;
      fi                                                ;
   el                                                   ;
      %МАСЛОСТАНЦИЯ5    = 0                             ;
   fi                                                   ;
   #-----------------------------------------------------
   if $I6GNS_1__V       > 0                             ;
      %МАСЛОСТАНЦИЯ6    = %МАСЛОСТАНЦИЯ6 + 1            ;
      if %МАСЛОСТАНЦИЯ6 > 3                             ;
         %МАСЛОСТАНЦИЯ6 = 1                             ;
      fi                                                ;
   el                                                   ;
      %МАСЛОСТАНЦИЯ6    = 0                             ;
   fi                                                   ;
   #-----------------------------------------------------
fi                                                      ;
#-----------------------------------------------------------------------------


#  Вакуумный насос (отображение работы)
#-----------------------------------------------------------------------------
   %ВАКУУМНЫЙ_НАСОС_Ф  = 0                           ;
if $I1VN_1___V         > 0                           ;
   %ВАКУУМНЫЙ_НАСОС_Ф  = 1                           ;
fi                                                   ;
if $I2VN_1___V         > 0                           ;
   %ВАКУУМНЫЙ_НАСОС_Ф  = 1                           ;
fi                                                   ;
if $I3VN_1___V         > 0                           ;
   %ВАКУУМНЫЙ_НАСОС_Ф  = 1                           ;
fi                                                   ;
if $I4VN_1___V         > 0                           ;
   %ВАКУУМНЫЙ_НАСОС_Ф  = 1                           ;
fi                                                   ;
if $I5VN_1___V         > 0                           ;
   %ВАКУУМНЫЙ_НАСОС_Ф  = 1                           ;
fi                                                   ;
if $I6VN_1___V         > 0                           ;
   %ВАКУУМНЫЙ_НАСОС_Ф  = 1                           ;
fi                                                   ;
#-----------------------------------------------------
if %ВАКУУМНЫЙ_НАСОС_Ф  = 1                           ;
   %ВАКУУМНЫЙ_НАСОС    = %ВАКУУМНЫЙ_НАСОС + 1        ;
   if %ВАКУУМНЫЙ_НАСОС > 3                           ;
      %ВАКУУМНЫЙ_НАСОС = 1                           ;
   fi                                                ;
el                                                   ;
   %ВАКУУМНЫЙ_НАСОС    = 0                           ;
fi                                                   ;
#-----------------------------------------------------


# Режим работы вакуумного насоса ЩТ/ПК
#-----------------------------------------------------
   %ВАКУУМНЫЙ_НАСОС_Р  = 0                           ;
if $I1VNMD___V         > 0                           ;
   %ВАКУУМНЫЙ_НАСОС_Р  = 1                           ;
fi                                                   ;
if $I2VNMD___V         > 0                           ;
   %ВАКУУМНЫЙ_НАСОС_Р  = 1                           ;
fi                                                   ;
if $I3VNMD___V         > 0                           ;
   %ВАКУУМНЫЙ_НАСОС_Р  = 1                           ;
fi                                                   ;
if $I4VNMD___V         > 0                           ;
   %ВАКУУМНЫЙ_НАСОС_Р  = 1                           ;
fi                                                   ;
if $I5VNMD___V         > 0                           ;
   %ВАКУУМНЫЙ_НАСОС_Р  = 1                           ;
fi                                                   ;
if $I6VNMD___V         > 0                           ;
   %ВАКУУМНЫЙ_НАСОС_Р  = 1                           ;
fi                                                   ;
#-----------------------------------------------------



#  Вакуумный насос (клапан) 
#  Входного канала нет- поэтому состояние надо брать по выходу: OxAZVO___V
#-----------------------------------------------------
   x0050               = 2                           ;
if $O1AZVO___V         > 0                           ;
   %ВАКУУМНЫЙ_НАСОС_К  = 0                           ;
fi                                                   ;
if $O2AZVO___V         > 0                           ;
   %ВАКУУМНЫЙ_НАСОС_К  = 0                           ;
fi                                                   ;
if $O3AZVO___V         > 0                           ;
   %ВАКУУМНЫЙ_НАСОС_К  = 0                           ;
fi                                                   ;
if $O4AZVO___V         > 0                           ;
   %ВАКУУМНЫЙ_НАСОС_К  = 0                           ;
fi                                                   ;
if $O5AZVO___V         > 0                           ;
   x0050               = 0                           ;
fi                                                   ;
if $O6AZVO___V         > 0                           ;
   x0050               = 0                           ;
fi                                                   ;
#-----------------------------------------------------
